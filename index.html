<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vox-Link | The Future of Accessibility</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
        
        body { font-family: 'Inter', sans-serif; }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #111; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .glow-text {
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }

        #canvas-container {
            width: 100%;
            height: 60vh;
            position: relative;
            overflow: hidden;
            background: radial-gradient(circle at center, #1a1a1a 0%, #000000 100%);
        }

        .loader {
            border-top-color: #3498db;
            -webkit-animation: spinner 1.5s linear infinite;
            animation: spinner 1.5s linear infinite;
        }
        
        @keyframes spinner {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    <!-- Import Map to resolve 'three' bare module specifier -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
            }
        }
    </script>
</head>
<body class="bg-black text-gray-100 selection:bg-white selection:text-black overflow-x-hidden">

    <!-- Navigation -->
    <nav class="fixed w-full z-50 top-0 left-0 border-b border-white/10 bg-black/80 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-white rounded-full animate-pulse"></div>
                    <span class="font-bold text-xl tracking-tighter">VOX-LINK</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <a href="#features" class="hover:text-white text-gray-400 px-3 py-2 rounded-md text-sm font-medium transition-colors">Technology</a>
                        <a href="#specs" class="hover:text-white text-gray-400 px-3 py-2 rounded-md text-sm font-medium transition-colors">Specs</a>
                        <a href="#pricing" class="hover:text-white text-gray-400 px-3 py-2 rounded-md text-sm font-medium transition-colors">Pricing</a>
                    </div>
                </div>
                <div>
                    <!-- Updated Pre-order button to scroll to Support section -->
                    <a href="#support" class="bg-white text-black px-4 py-2 rounded-full text-sm font-bold hover:bg-gray-200 transition-colors inline-block">
                        Pre-order / Support
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section with 3D Canvas -->
    <section class="relative pt-16">
        <div id="canvas-container">
            <!-- 3D Canvas will be injected here -->
            <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 flex gap-4 z-10">
                <button id="rotate-toggle" class="glass-panel px-6 py-2 rounded-full text-sm font-semibold hover:bg-white/10 transition-all flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>
                    Auto-Rotate
                </button>
                <button id="explode-toggle" class="glass-panel px-6 py-2 rounded-full text-sm font-semibold hover:bg-white/10 transition-all text-blue-400 border-blue-400/30 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" /></svg>
                    Exploded View
                </button>
            </div>
            
            <div class="absolute top-1/2 left-4 md:left-12 transform -translate-y-1/2 max-w-sm pointer-events-none">
                <h1 class="text-5xl md:text-7xl font-extrabold tracking-tighter glow-text mb-2">Vox-Link</h1>
                <p class="text-gray-400 text-lg">The most affordable Sign Translator. <span class="text-white">Under ₹5k.</span> Powered by Edge AI.</p>
            </div>
        </div>
    </section>

    <!-- Technical Deep Dive -->
    <section id="features" class="py-20 bg-black">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold tracking-tight text-white sm:text-4xl">Software over Hardware</h2>
                <p class="mt-4 text-gray-400">How we slashed costs by 60% using advanced algorithms.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Feature 1 -->
                <div class="glass-panel p-8 rounded-2xl hover:border-white/30 transition-all duration-300">
                    <div class="h-12 w-12 bg-blue-900/50 rounded-lg flex items-center justify-center mb-6 text-blue-400">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Monocular Vision AI</h3>
                    <p class="text-gray-400 text-sm leading-relaxed">
                        We removed the expensive LiDAR. Our "Depth-from-Mono" neural net calculates 3D distance using a single standard camera, saving ₹2,500 per unit.
                    </p>
                </div>

                <!-- Feature 2 -->
                <div class="glass-panel p-8 rounded-2xl hover:border-white/30 transition-all duration-300">
                    <div class="h-12 w-12 bg-purple-900/50 rounded-lg flex items-center justify-center mb-6 text-purple-400">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" /></svg>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Edge Optimization</h3>
                    <p class="text-gray-400 text-sm leading-relaxed">
                        Running on a cost-effective ESP32-S3 chip. We used model quantization to fit a powerful Agentic AI into a ₹400 processor.
                    </p>
                </div>

                <!-- Feature 3 -->
                <div class="glass-panel p-8 rounded-2xl hover:border-white/30 transition-all duration-300">
                    <div class="h-12 w-12 bg-green-900/50 rounded-lg flex items-center justify-center mb-6 text-green-400">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" /></svg>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Context Agent</h3>
                    <p class="text-gray-400 text-sm leading-relaxed">
                        It doesn't just translate words; it understands context. The AI Agent analyzes micro-expressions and sentence structure to voice your true intent.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing & Viability -->
    <section id="pricing" class="py-20 border-t border-white/10">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="bg-gradient-to-br from-gray-900 to-black border border-gray-800 rounded-3xl overflow-hidden flex flex-col md:flex-row">
                <div class="p-10 md:w-2/3">
                    <h3 class="text-2xl font-bold text-white mb-4">Democratizing Accessibility</h3>
                    <p class="text-gray-400 mb-6">Competitors cost ₹50,000+. By stripping away non-essential hardware and trusting our AI code, we built this.</p>
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-center text-sm text-gray-300">
                            <svg class="h-5 w-5 text-green-500 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                            High-Density Polycarbonate Body (Durable & Cheap)
                        </li>
                        <li class="flex items-center text-sm text-gray-300">
                            <svg class="h-5 w-5 text-green-500 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                            Hybrid Cloud AI (Low Power usage)
                        </li>
                        <li class="flex items-center text-sm text-gray-300">
                            <svg class="h-5 w-5 text-green-500 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                            Magnetic Universal Clip
                        </li>
                    </ul>
                </div>
                <div class="bg-white text-black p-10 md:w-1/3 flex flex-col justify-center items-center text-center">
                    <span class="text-sm font-bold uppercase tracking-wide text-gray-500">Mass Market Price</span>
                    <span class="text-4xl font-extrabold mt-2">₹4,999</span>
                    <span class="text-xs text-gray-500 mt-2">Prototype cost: ~₹1,800</span>
                    <a href="#features" class="inline-block mt-6 w-full bg-black text-white py-3 rounded-xl font-bold hover:bg-gray-800 transition-transform hover:scale-105">
                        View Logic
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Support / QR Code Section -->
    <section id="support" class="py-20 bg-gray-900 border-t border-white/10">
        <div class="max-w-3xl mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold text-white mb-6">Support Our Research</h2>
            <p class="text-gray-400 mb-8">Help us bring the Vox-Link Node to production. Your contribution speeds up R&D.</p>
            
            <div class="bg-white p-6 rounded-2xl inline-block shadow-2xl shadow-purple-500/20 max-w-sm w-full">
                <!-- User's QR Code Image -->
                <div class="relative w-full aspect-[3/4] overflow-hidden rounded-lg mx-auto mb-4 border border-gray-200 bg-gray-100 flex items-center justify-center">
                     <!-- 
                        NOTE: The image below has an 'onerror' script. 
                        In the preview window, it will load a placeholder QR because it can't find your local file.
                        When you download this HTML and put 'Shailesh QR.jpeg' next to it, your real QR will appear.
                     -->
                     <img 
                        src="Shailesh%20QR.jpeg" 
                        alt="Scan to Pay via PhonePe" 
                        class="w-full h-full object-contain"
                        onerror="this.onerror=null; this.src='https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=PhonePe-Placeholder';"
                     >
                </div>
                <p class="text-black font-bold text-lg">Shailesh Soni</p>
                <p class="text-gray-500 text-xs mt-1">Accepted via PhonePe / UPI</p>
                <p class="text-red-500 text-[10px] mt-2 italic">(Ensure 'Shailesh QR.jpeg' is in the same folder as this file)</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black border-t border-white/10 py-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-gray-500 text-sm">© 2025 Vox-Link Project. Designed by <span class="text-white font-bold">Shailesh Soni</span>.</p>
        </div>
    </footer>

    <!-- Three.js Logic -->
    <script type="module">
        // Import map resolves 'three' to the URL defined in <head>
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        // --- SCENE SETUP ---
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        // Fog for depth
        scene.fog = new THREE.FogExp2(0x000000, 0.05);

        const camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 100);
        camera.position.set(0, 5, 10);

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(container.clientWidth, container.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.shadowMap.enabled = true;
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.0;
        container.appendChild(renderer.domElement);

        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.enableZoom = false; // Keep the focus on the product
        controls.autoRotate = true;
        controls.autoRotateSpeed = 2.0;

        // --- LIGHTING (Studio Setup) ---
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
        scene.add(ambientLight);

        // Key Light
        const dirLight = new THREE.DirectionalLight(0xffffff, 2.5);
        dirLight.position.set(5, 10, 7);
        dirLight.castShadow = true;
        dirLight.shadow.mapSize.width = 1024;
        dirLight.shadow.mapSize.height = 1024;
        scene.add(dirLight);

        // Rim Light (Blue-ish to look techy)
        const rimLight = new THREE.SpotLight(0x3498db, 50);
        rimLight.position.set(-5, 0, -5);
        rimLight.lookAt(0,0,0);
        scene.add(rimLight);
        
        // Fill Light
        const fillLight = new THREE.PointLight(0xffffff, 1);
        fillLight.position.set(5, 0, -5);
        scene.add(fillLight);

        // --- HELPER: GENERATE PCB TEXTURE ---
        function createPCBTexture() {
            const canvas = document.createElement('canvas');
            canvas.width = 1024;
            canvas.height = 1024;
            const ctx = canvas.getContext('2d');
            
            // 1. Dark Green Background
            const grd = ctx.createLinearGradient(0, 0, 1024, 1024);
            grd.addColorStop(0, '#0a3d1b');
            grd.addColorStop(1, '#052910');
            ctx.fillStyle = grd;
            ctx.fillRect(0, 0, 1024, 1024);
            
            // 2. Traces (Lighter Green)
            ctx.strokeStyle = '#2ecc71';
            ctx.lineWidth = 4;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            for(let i=0; i<100; i++) {
                ctx.beginPath();
                const x = Math.random() * 1024;
                const y = Math.random() * 1024;
                ctx.moveTo(x, y);
                // Draw a random path
                let cx = x;
                let cy = y;
                for(let j=0; j<3; j++) {
                    if(Math.random() > 0.5) {
                        cx += (Math.random() - 0.5) * 300;
                    } else {
                        cy += (Math.random() - 0.5) * 300;
                    }
                    ctx.lineTo(cx, cy);
                }
                ctx.stroke();
            }
            
            // 3. Vias (Gold Dots)
            ctx.fillStyle = '#DAA520';
            for(let i=0; i<80; i++) {
                ctx.beginPath();
                ctx.arc(Math.random() * 1024, Math.random() * 1024, 6, 0, Math.PI * 2);
                ctx.fill();
            }

            const tex = new THREE.CanvasTexture(canvas);
            tex.anisotropy = 16;
            return tex;
        }

        const pcbTexture = createPCBTexture();

        // --- MATERIALS (Physically Based) ---
        const matteBlack = new THREE.MeshStandardMaterial({ 
            color: 0x111111, 
            roughness: 0.7, 
            metalness: 0.1 
        });
        
        // Glassy Lens
        const lensGlass = new THREE.MeshPhysicalMaterial({
            color: 0x000000,
            metalness: 0.1,
            roughness: 0.05,
            transmission: 0.9, // Thin glass
            thickness: 0.5,
            clearcoat: 1.0,
            clearcoatRoughness: 0.1
        });

        const chipBoardMat = new THREE.MeshStandardMaterial({
            map: pcbTexture,
            color: 0xffffff, // Let texture color show
            roughness: 0.4,
            metalness: 0.3,
            bumpMap: pcbTexture,
            bumpScale: 0.02
        });

        const batterySilver = new THREE.MeshStandardMaterial({
            color: 0xbdc3c7,
            roughness: 0.3,
            metalness: 0.9
        });
        
        const chipBlack = new THREE.MeshStandardMaterial({
            color: 0x050505, 
            roughness: 0.4,
            metalness: 0.1
        });
        
        const goldMetal = new THREE.MeshStandardMaterial({
            color: 0xFFD700, 
            metalness: 1.0, 
            roughness: 0.2
        });
        
        const silverPin = new THREE.MeshStandardMaterial({
            color: 0xcccccc,
            metalness: 0.9,
            roughness: 0.2
        });

        // --- GEOMETRY CONSTRUCTION ---
        const productGroup = new THREE.Group();
        scene.add(productGroup);

        // 1. FRONT COVER (The Puck Top)
        const coverGeo = new THREE.CylinderGeometry(2, 2, 0.4, 64);
        const coverMesh = new THREE.Mesh(coverGeo, matteBlack);
        coverMesh.position.y = 0.6;
        coverMesh.castShadow = true;
        coverMesh.receiveShadow = true;
        
        // Lens Housing (Slightly shiny ring)
        const ringGeo = new THREE.TorusGeometry(0.3, 0.05, 16, 32);
        const ringMesh = new THREE.Mesh(ringGeo, matteBlack);
        ringMesh.position.y = 0.8;
        ringMesh.rotation.x = Math.PI / 2;
        coverMesh.add(ringMesh);

        // Lens Glass
        const lensGeo = new THREE.SphereGeometry(0.25, 32, 32); 
        const lensMesh = new THREE.Mesh(lensGeo, lensGlass);
        lensMesh.position.y = 0.8; 
        lensMesh.scale.y = 0.5; 
        
        const frontLayer = new THREE.Group();
        frontLayer.add(coverMesh);
        frontLayer.add(lensMesh);
        productGroup.add(frontLayer);


        // 2. CHIP LAYER (The Brains)
        const boardGeo = new THREE.CylinderGeometry(1.8, 1.8, 0.08, 64);
        const boardMesh = new THREE.Mesh(boardGeo, chipBoardMat);
        
        // --- DETAILED COMPONENTS ---
        
        // Main NPU (The "Intel" of the device)
        const npuGroup = new THREE.Group();
        const npuBody = new THREE.Mesh(new THREE.BoxGeometry(0.8, 0.1, 0.8), chipBlack);
        const npuHeat = new THREE.Mesh(new THREE.BoxGeometry(0.5, 0.02, 0.5), goldMetal);
        npuHeat.position.y = 0.06;
        npuGroup.add(npuBody);
        npuGroup.add(npuHeat);
        npuGroup.position.set(0, 0.09, 0);
        boardMesh.add(npuGroup);
        
        // Solder Pins for NPU (Tiny details matter for realism)
        const pinGeo = new THREE.BoxGeometry(0.02, 0.02, 0.1);
        for(let i=0; i<10; i++) {
            // Side 1
            let pin = new THREE.Mesh(pinGeo, silverPin);
            pin.position.set(-0.35 + (i*0.075), 0, 0.45);
            npuGroup.add(pin);
            // Side 2
            let pin2 = new THREE.Mesh(pinGeo, silverPin);
            pin2.position.set(-0.35 + (i*0.075), 0, -0.45);
            npuGroup.add(pin2);
        }

        // Memory Chips (Side rectangles)
        const ramGeo = new THREE.BoxGeometry(0.3, 0.08, 0.6);
        const ram1 = new THREE.Mesh(ramGeo, chipBlack);
        ram1.position.set(0.8, 0.09, 0);
        boardMesh.add(ram1);
        
        const ram2 = new THREE.Mesh(ramGeo, chipBlack);
        ram2.position.set(-0.8, 0.09, 0);
        boardMesh.add(ram2);
        
        // Capacitors (Tiny cylinders around the edge)
        const capGeo = new THREE.CylinderGeometry(0.08, 0.08, 0.15, 16);
        const capPos = [
            [0.5, 0.8], [0.8, 0.6], 
            [-0.5, 0.8], [-0.8, 0.6],
            [0.5, -0.8], [0.8, -0.6], 
            [-0.5, -0.8], [-0.8, -0.6]
        ];
        
        capPos.forEach(pos => {
            const cap = new THREE.Mesh(capGeo, silverPin);
            cap.position.set(pos[0], 0.1, pos[1]);
            cap.castShadow = true;
            boardMesh.add(cap);
        });

        // Connector Port (Gold)
        const portGeo = new THREE.BoxGeometry(0.4, 0.1, 0.3);
        const portMesh = new THREE.Mesh(portGeo, goldMetal);
        portMesh.position.set(0, 0.1, 1.2);
        boardMesh.add(portMesh);
        
        const chipLayer = new THREE.Group();
        chipLayer.add(boardMesh);
        chipLayer.position.y = 0.2;
        productGroup.add(chipLayer);


        // 3. BATTERY LAYER
        const batGeo = new THREE.BoxGeometry(1.5, 0.3, 1.5); 
        const batMesh = new THREE.Mesh(batGeo, batterySilver);
        
        // Battery text (Simulated with simple geometry strips)
        const strip = new THREE.Mesh(new THREE.PlaneGeometry(1.2, 0.8), matteBlack);
        strip.rotation.x = -Math.PI/2;
        strip.position.y = 0.16;
        batMesh.add(strip);

        const batteryLayer = new THREE.Group();
        batteryLayer.add(batMesh);
        batteryLayer.position.y = -0.1;
        productGroup.add(batteryLayer);


        // 4. BACKPLATE & CLIP
        const backGeo = new THREE.CylinderGeometry(2, 2, 0.2, 64);
        const backMesh = new THREE.Mesh(backGeo, matteBlack);
        backMesh.castShadow = true;
        
        // The Clip
        const clipGroup = new THREE.Group();
        const clipBase = new THREE.Mesh(new THREE.BoxGeometry(1, 0.1, 1.5), matteBlack);
        const clipArm = new THREE.Mesh(new THREE.BoxGeometry(1, 1.2, 0.1), matteBlack);
        clipArm.position.set(0, -0.6, 0.7); // Hinge area
        
        clipGroup.add(clipBase);
        clipGroup.position.set(0, -0.2, 0);
        backMesh.add(clipGroup);
        
        const backLayer = new THREE.Group();
        backLayer.add(backMesh);
        backLayer.position.y = -0.4;
        productGroup.add(backLayer);


        // ROTATE WHOLE GROUP TO FACE CAMERA UPRIGHT
        productGroup.rotation.x = Math.PI / 2;

        // --- ANIMATION LOGIC ---
        let exploded = false;
        
        function animateParts(targetY_Front, targetY_Chip, targetY_Bat, targetY_Back) {
            targets.front = targetY_Front;
            targets.chip = targetY_Chip;
            targets.bat = targetY_Bat;
            targets.back = targetY_Back;
        }

        const targets = {
            front: 0.6,
            chip: 0.2,
            bat: -0.1,
            back: -0.4
        };

        // Listeners
        document.getElementById('explode-toggle').addEventListener('click', () => {
            exploded = !exploded;
            if (exploded) {
                // Explode positions
                animateParts(2.2, 0.8, -0.5, -1.5);
                controls.autoRotate = false; 
                document.getElementById('explode-toggle').innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 13H5v-2h14v2z" /></svg>
                    Collapse View
                `;
            } else {
                // Reset positions
                animateParts(0.6, 0.2, -0.1, -0.4);
                controls.autoRotate = true;
                document.getElementById('explode-toggle').innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" /></svg>
                    Exploded View
                `;
            }
        });

        document.getElementById('rotate-toggle').addEventListener('click', () => {
            controls.autoRotate = !controls.autoRotate;
        });

        window.addEventListener('resize', () => {
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        });

        // --- RENDER LOOP ---
        function animate() {
            requestAnimationFrame(animate);
            
            controls.update();
            
            // Lerp animation for explosion
            frontLayer.position.y += (targets.front - frontLayer.position.y) * 0.1;
            chipLayer.position.y += (targets.chip - chipLayer.position.y) * 0.1;
            batteryLayer.position.y += (targets.bat - batteryLayer.position.y) * 0.1;
            backLayer.position.y += (targets.back - backLayer.position.y) * 0.1;

            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>

</html>


